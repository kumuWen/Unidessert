<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unidessert有你甜點|歷史訂單</title>
    <link href="https://api.fontshare.com/v2/css?f[]=gambetta@400,1,300,600,701,2,501,401,301,601,500,700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&family=Satisfy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <script src="/js/jquery-3.7.0.min.js"></script>
    <link rel="stylesheet" href="/css/historyOrder.css">
</head>


<body>
    <%-include('nav') %>
    <div class="mycontainer container mb-5-uni">
        <div aria-label="breadcrumb">
            <ol class="breadcrumb fs-3">
                <li class="breadcrumb-item"><a style="color:#702F43" href="/">首頁</a></li>
                <li class="breadcrumb-item"><a style="color:#702F43" href="/member">會員中心</a></li>
                <li class="breadcrumb-item active" aria-current="page">歷史訂單</li>
            </ol>
        </div>
        <div class="container">
            <div class=" mb-3 text-center fz-3r">歷史訂單</div>
            <div class="p-4 row  topic">
                <div class="row">
                        <div class="col-md-4 pe-2">
                            <span class="ms-4">訂單編號:<%= oid%></span>
                        </div>
                        <div class="col-md-8 text-center">
                            訂單日期:<%= order_date%>
                        </div>
                    </div>
            </div>
        </div>
        <div class="table">
            <div class="ps-5 bigform">
                <div class="table-header row">
                    <div class="table-cell col-2 px-2">&nbsp;&nbsp;商品明细</div>
                    <div class="table-cell col-3">客製化規格</div>
                    <div class="table-cell col-1"></div>
                    <div class="table-cell col-4">客製化卡片</div>
                    <div class="table-cell col-2"></div>
                </div>
                <% for (let i = 0; i < history_Order.length; i++) { %>
                    <% if (history_Order[i].size !== null || history_Order[i].cookie1 !== null || history_Order[i].cookie2 !== null || history_Order[i].cookie3 !== null || history_Order[i].cookie4 !== null || history_Order[i].boxcolor !== null || history_Order[i].bagcolor !== null || history_Order[i].cardcontent !== null || history_Order[i].quantity !== null || history_Order[i].cprice !== null || !isNaN(cprice_total) || history_Order[i].pd_name !== null || history_Order[i].pd_content !== null || history_Order[i].p_price !== null || history_Order[i].price_total !== null) { %>
                        <div class="table-row table-row1 order row">
                        <% if (history_Order[i].size !== null) { %>
                            <div class="table-cell col-2 ">
                                <div class="product-info p-10">
                                    <img class="m-10" src="<%= history_Order[i].cpic%>" width="150px" alt="Product 1">
                                    <p class="m-10 product-name p-10">客製化禮盒</p>
                                </div>
                            </div>
                        <% }%>
                        <% if (history_Order[i].size !== null && history_Order[i].cookie1 !== null && history_Order[i].cookie2 !== null && history_Order[i].cookie3 !== null && history_Order[i].cookie4 !== null && history_Order[i].boxcolor !== null && history_Order[i].bagcolor !== null) { %>
                            <div class="table-cell item col-4 p-3">
                                <li class="mb-3">規格:<%= history_Order[i].size%></li>
                                <li class="mb-3">內容物:<%= history_Order[i].cookie1%>,
                                    <%= history_Order[i].cookie2%>,<br>
                                    <%= history_Order[i].cookie3%>,
                                    <%= history_Order[i].cookie4%>
                                </li>
                                <li class="mb-3">禮物盒:<%= history_Order[i].boxcolor%></li>
                                <li>紙袋:<%= history_Order[i].bagcolor%></li>
                            </div>
                        <% } %>
                        <% if (history_Order[i].cardcontent !== null) { %>
                            <div class="table-cell item col-3  p-0">
                                <div><%= history_Order[i].cardcontent%></div>
                            </div>
                        <% } %>
                            <% let cprice_total = history_Order[i].quantity2 * history_Order[i].cprice; %>
                            <% if (history_Order[i].quantity2 !== null && history_Order[i].quantity2 !== 0) { %>
                            <div class="table-cell item col-3 row">
                                    <div class="row">
                                        <div class="table-cell item col-2 "></div>
                                        <div class="table-cell item col-5 p-0">&nbsp;&nbsp;數量:</div>
                                            <div class="table-cell item col-5 amount m-0 p-0">
                                                <span class="quantity">&nbsp;&nbsp;<%= history_Order[i].quantity2%>件</span>
                                            </div>
                                    </div>
                                <% } %>
                                <% if (history_Order[i].cprice !== null ) { %>
                                    <div class="row">
                                        <div class="table-cell item col-2 "></div>
                                        <div class="table-cell item col-5 p-0">&nbsp;&nbsp;價格:</div>
                                            <div class="table-cell item col-5 price m-0 p-0"> &nbsp;&nbsp;$<%= history_Order[i].cprice%></div>
                                    </div>
                                <% } %>
                                <% if(!isNaN( cprice_total) && cprice_total != null && cprice_total !== 0) {%>
                                    <div class="row">
                                        <div class="table-cell item col-2 "></div>
                                        <div class="table-cell item col-5 p-0">&nbsp;&nbsp;小計:</div>
                                            <div class="table-cell item col-5 price-total m-0 p-0">&nbsp;&nbsp;$<%=  cprice_total%></div>
                                    </div>
                                </div>
                                <% } %>
                            <% cp_total += cprice_total; %>
                        </div>
                        <div class="table-row table-row1 order row">
                            <% if (history_Order[i].pd_name !== null) { %>
                                <div class="table-cell col-2 px-2">
                                    <div class="product-info p-10">
                                        <img class="m-10" src="<%= history_Order[i].p_pic%>" width="150px" alt="Product 1">
                                        <p class="m-10 product-name p-10"><%= history_Order[i].pd_name%></p>
                                    </div>
                                </div>
                            <% }%>
                            <% if (history_Order[i].pd_content !== null) { %>
                                <div class="table-cell item col-4 ">
                                    <li class="p-3"><%= history_Order[i].pd_content%></li>
                                </div>
                            <% }%>
                            <% if (history_Order[i].pd_content !== null) { %>
                                <div class="table-cell item col-3  p-0">
                                </div>
                            <% }%>
                            <% let price_total = history_Order[i].quantity * history_Order[i].p_price; %>
                            <div class="table-cell item col-3 row">
                                <% if (history_Order[i].quantity !== null && history_Order[i].quantity !== 0) { %>
                                    <div class="row">
                                        <div class="table-cell item col-2 "></div>
                                        <div class="table-cell item col-5 p-0">&nbsp;&nbsp;數量:</div>
                                            <div class="table-cell item col-5 amount m-0 p-0">
                                                <span class="quantity">&nbsp;&nbsp;<%= history_Order[i].quantity%>件</span>
                                            </div>
                                    </div>
                                <% }%>
                                <% if (history_Order[i].p_price !== null) { %>
                                    <div class="row">
                                        <div class="table-cell item col-2 "></div>
                                        <div class="table-cell item col-5 p-0">&nbsp;&nbsp;價格:</div>
                                            <div class="table-cell item col-5 price m-0 p-0"> &nbsp;&nbsp;$<%= history_Order[i].p_price%></div>
                                    </div>
                                <% }%>
                                <% if(!isNaN(price_total) && price_total != null && price_total !== 0) { %>
                                    <div class="row">
                                        <div class="table-cell item col-2 "></div>
                                        <div class="table-cell item col-5 p-0">&nbsp;&nbsp;小計:</div>
                                            <div class="table-cell item col-5 price-total m-0 p-0"> &nbsp;&nbsp;$<%=price_total%></div>
                                    </div>
                                <% }%>
                            </div>
                            <% cp_total += price_total; %>
                        </div>
                    <% }%>    
                <% }%>
                <% let order_total = cp_total +deliever_fee%>
                <div class="table-footer">
                    <div class="table-row table-row1 row" style="border: none;">
                        <div class="table-cell col-3"></div>
                        <div class="table-cell col-6">收件人:<%= recipient%></div>
                        <div class="table-cell item col-3 row">
                        </div>
                    </div>
                    <div class="table-row table-row1 row" style="border: none;">
                        <div class="table-cell col-3 ps-4">收件人明細</div>
                        <div class="table-cell col-6">收件人手機:<%= recipient_phone%></div>
                        <div class="table-cell item col-3 row">
                        </div>
                    </div>
                    <div class="table-row table-row1 row">
                        <div class="table-cell col-3"></div>
                        <div class="table-cell col-6">收件人地址:<%= recipient_address%></div>
                        <div class="table-cell item col-3 row">
                        </div>
                    </div>
                    <div class="table-row table-row1 row">
                        <div class="table-cell col-3"></div>
                        <div class="table-cell col-6"></div>
                        <div class="table-cell item col-3 row">
                            <div class="col-7">商品總計:</div>
                            <div class="col-5"><%= quantity_total%>件</div>
                        </div>
                    </div>
                    <div class="table-row table-row1 row">
                        <div class="table-cell col-6"></div>
                        <div class="table-cell col-3"></div>
                        <div class="table-cell item col-3 row">
                            <div class="col-7">商品金額:</div>
                            <div class="col-5">$<%= cp_total%></div>
                        </div>
                        <!-- <div class="table-cell item col-1 product-amount ">2件</div> -->
                    </div>
                    <div class="table-row table-row1 row">
                        <div class="table-cell col-6"></div>
                        <div class="table-cell col-3"></div>
                        <div class="table-cell item col-3 row">
                            <div class="col-7">運費金額:</div>
                            <div class="col-5">$<%= deliever_fee%></div>
                        </div>
                        <!-- <div class="table-cell item col-1 product-amount ">2件</div> -->
                    </div>
                    <div class="table-row table-row1 row" style="border: none;">
                        <div class="table-cell col-6"></div>
                        <div class="table-cell col-3"></div>
                        <div class="table-cell item col-3 row">
                            <div class="col-7">訂單總計:</div>
                            <div class="col-5">$<%= order_total%></div>
                        </div>
                        <!-- <div class="table-cell item col-1 product-amount ">2件</div> -->
                    </div>
                    <div class="table-row table-row1 row" style="border: none;">
                        <div class="table-cell col-6"></div>
                        <div class="table-cell col-3"></div>
                        <div class="table-cell item col-3 row">
                        </div>
                    </div>
                </div>
                </div>
            </div>
    </div>
    <%-include('footer') %>
    <script src="/js/bootstrap.bundle.js"></script>
    <script src="/js/jquery-3.7.0.min.js"></script>
    <script src="/js/script.js"> </script>
</body>

</html>